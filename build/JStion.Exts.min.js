!function(a,b){"use strict";b.fn.cloture={},b.create_operateur("param",function(a){return this.scale(a)}).create_operateur("constant",function(a){return function(){return this.scale(a)}}).create_operateur("taux",function(a){return a/=100,function(b){return this.scale(a*b)}}).create_operateur("itaux",function(a){return a=1-1/(1+a/100),function(b){return this.scale(a*b)}}).create_operateur("ceil",function(a){return a=Math.ceil(a)-a,this.scale(a)}),b.fn.cloture.ecriture_bilan=function(a,c,d,e){var f=c.s_etat("1","2","3","4","5").filter(function(a){return!a[1].inEquilibrium()}).map(function(a){var c=a[1].reduction();return c>0?[d(a[0]),c,new b.Fragment([[a[0],a[1]]])]:[e(a[0]),-c,new b.Fragment([[a[0],a[1]]])]}).reduce(function(a,b){return[b[0].o(a[0]),[b[1]].concat(a[1]),b[2].add(a[2])]},[]);return[f[0].apply(null,[a].concat(f[1])),f[2]]},b.fn.cloture.bilan=function(a,c,d){var e,f,g;return e=b.aggregate(b.aggregate("Immobilisations incorporelles",201,203,205,206,207,208,232,237),b.aggregate("Immobilisations corporelles",211,212,213,214,215,218,231,238),b.aggregate("Immobilisations financières",261,266,267,268,271,272,273,274,275,276,277)),f=b.aggregate(b.aggregate("Stocks matières premières, en-cours de production produits (intermédiaires, finis) et autres approvisionnements",31,32,33,34,35),b.aggregate("Stocks marchandises",37),b.aggregate("Avances, acomptes versés sur commandes",4091),b.aggregate("Créances clients et comptes rattachés",411,413,416,417,418),b.aggregate("Autres créances",4096,4097,4098,425,441,462,465,b.ag_mask(c,443,444,445,448,451,456,428,438,467,468,478)),b.aggregate("Valeurs mobilières de placement",501,502,503,504,505,506,507,508),b.aggregate("Disponibilités et instruments de trésorerie",511,515,516,53,54,b.ag_mask(c,517,518,512,514,52)),b.aggregate("Charges constatées d'avance",486)),f=b.aggregate(b.aggregate("Capital souscrit non appelé",109),b.aggregate("## ACTIF IMMOBILISÉ",e),e,b.aggregate(""),b.aggregate("## ACTIF CIRCULANT",f),f,b.aggregate(""),b.aggregate("Comptes de régularisation",169,476,481),b.aggregate("# TOTAL ACTIF",109,e,f,169,476,481)),e=b.aggregate(b.aggregate("Capital social, primes",101,108,104),b.aggregate("Résultat de l'exercice",120,129),b.aggregate("Subventions d'investissement",131,138),b.aggregate("Autres capitaux propres",110,119,105,1061,1063,1064,1068,14)),g=b.aggregate(b.aggregate("Emprunts et dettes assimilées",161,163,164,165,166,1675,168,17,426,519,b.ag_mask(d,451,456,467,512,514,517,518)),b.aggregate("Dette auprès des associés",b.ag_mask(d,455)),b.aggregate("Avances, acomptes sur commandes en cours",4191),b.aggregate("Dettes fournisseurs - comptes rattachés",401,403,408),b.aggregate("Autres dettes",421,422,424,427,431,437,442,446,447,457,269,279,404,405,4196,4198,464,509,b.ag_mask(d,428,438,443,444,445,448,468,478))),g=b.aggregate(b.aggregate("## CAPITAUX PROPRES",e),e,b.aggregate(""),b.aggregate("Autres fonds propres",1671,1674),b.aggregate("Provisions risques et charges",151,153,155,156,157,158),b.aggregate(""),b.aggregate("## DETTES",g),g,b.aggregate(""),b.aggregate("Produits constatés d'avance, écarts de conversion du passif",487,477),b.aggregate("# TOTAL PASSIF",e,g,1671,1674,151,153,155,156,157,158,487,477)),{col_1:f(a).single_col(!0),col_2:g(a).negate().single_col(!0)}},b.fn.cloture.calcul_resultat=function(a,b,c,d){var e=b.s_etat("6","7").filter(function(a){return!a[1].inEquilibrium()}).map(function(a){var b=a[1].reduction();return b>0?[c(a[0]),b]:[d(a[0]),-b]}).reduce(function(a,b){return[b[0].o(a[0]),[b[1]].concat(a[1])]},[]);return e[0].apply(null,[a].concat(e[1]))},b.fn.cloture.ecriture_resultat=function(a,b,c){var d=a.etat("12").solde()[0][1].reduction();return d>0?b(d):c(-d)},b.fn.cloture.compte2resultat=function(a){var c,d,e;e=b.aggregate(b.aggregate("Achats de marchandises",607,-609),b.aggregate("Variation des stocks (marchandises)",6037),b.aggregate("Achats de matières premières et autres approvisionnements",601,602,-609),b.aggregate("Variation des stocks (matières premières et autres approvisionnements)",6031,6032,-6039),b.aggregate("Autres achats et charges externes",604,605,606,61,62,-619,-629),b.aggregate("Impôts, taxes et versements assimilés",631,633,635,637),b.aggregate("Salaires et traitements",641,644,648),b.aggregate("Charges sociales",645,646,647,648),b.aggregate("Dotations aux amortissements",6811,6812),b.aggregate("Dotations aux provisions",6815,6816,6817),b.aggregate("Autres charges d'exploitation",65,-655)),c=b.aggregate(b.aggregate("# Charges d'exploitation",e),e,b.aggregate(""),b.aggregate("# Quote-part de résultat sur opérations faites en commun",655),b.aggregate(""),b.aggregate("# Charges financières Produits financiers",66),b.aggregate("Dont intérêts et charges assimilées",661,664,665,668),b.aggregate(""),b.aggregate("# Charges exceptionnelles",67),b.aggregate(""),b.aggregate("# Impôts sur les bénéfices",695,696,697,698,699),b.aggregate("# Participation des salariés aux résultats",691)),e=b.aggregate(b.aggregate("Ventes de marchandises",707,-7097),b.aggregate("Production vendue (biens et services)",70,-707,-709,7097)),d=b.aggregate(b.aggregate("## Chiffre d'affaire",e),b.aggregate("Dont à l'export"),b.aggregate(""),b.aggregate("Production stockée",713),b.aggregate("Production immobilisée",72),b.aggregate("Production immobilisée",74),b.aggregate("Autres produits (dont reprises sur amortissements et transferts de charges)",78,79,75,-755)),d=b.aggregate(b.aggregate("# Produit d'exploitation",d),e,d,b.aggregate(""),b.aggregate("# Quote-part de résultat sur opérations faites en commun",755),b.aggregate(""),b.aggregate("# Produits financiers",76),b.aggregate("Dont intérêts et produit assimilées",763,764,765,768),b.aggregate("Dont produits de participations",761),b.aggregate(""),b.aggregate("# Produits exceptionnels",77));var f={col_1:c(a).single_col(!0),col_2:d(a).single_col(!0)},g=[f.col_1,f.col_2].map(function(a){return a.filter(function(a){return 0===a[0].indexOf("# ")}).map(function(a){return a[1]}).reduce(function(a,b){return b.add(a)})}).reduce(function(a,b){return b.add(a)}).quotient().negate();return 0!==g.reduction()&&(g.reduction()>0?f.col_1.push(["# Benefice",g]):f.col_2.push(["# Perte",g])),f.col_2=f.col_2.single_col(!1).negate().single_col(!0),f}}(window,$fi);