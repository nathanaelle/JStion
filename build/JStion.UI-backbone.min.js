!function(a,b,c){b.fn.m={},b.fn.v={},b.fn.m.Entite=c.Model.extend({history:function(){return this.get("entite").history()},back:function(a){return this.get("entite").back(a)},current:function(){return this.get("entite").back(0)},nom:function(){return this.get("entite").nom},toJSON:function(){return this.get("entite").toJSON()},toVSON:function(){return this.get("entite").toVSON()}}),b.fn.v.b2=_.template("<tr><th><%=account%><td><%=debit%><td><%=credit%><td><%=solde_debit%><td><%=solde_credit%></tr><% _.each( subaccounts, function(c){%><%= window.$fi.v.b2(c) %><% }); %>"),b.fn.v.Balance=c.View.extend({el:"<table>",template:_.template("<caption><%=nom%> — <%=message%></caption><tr><th>compte<th>debit<th>credit<th>Solde débiteur<th>Solde créditeur</tr><% _.each( livre.accounts, function(c){ %><%= window.$fi.v.b2(c) %><% }); %>"),render:function(){return $(this.el).html(this.template(this.model.toVSON())),this}}),b.fn.v.Ecriture=c.View.extend({el:"<table>",template:_.template('<caption><%= message %></caption><tr><th>compte</th><th>debit</th><th>credit</th></tr><% _.each( mouvement, function(l){ %><tr><th><%= l[0] %></th><td><%= l[1]?l[1].toFixed(window.$fi.fix):"" %></td><td><%= l[2]?l[2].toFixed(window.$fi.fix):"" %></td></tr> <% }) %></table>'),render:function(){return $(this.el).html(this.template(this.model.toVSON())),this}}),b.fn.v.Etat=c.View.extend({tagName:"table",className:"etat",template:_.template('<table><% _.each( d, function(l){ %><tr class="h<%= l[0].split("#").length-1 %>"><td><%= l[0].split("#").pop() %></td><td><%= l[1] %></td> <% }) %></table>'),render:function(){return $(this.el).html("<tr><td>"+this.template({d:this.model.col_1.toVSON()})+"</td><td>"+this.template({d:this.model.col_2.toVSON()})+"</td></tr>"),this}}),b.fn.v.Fragment=c.View.extend({el:"<table>",template:_.template("<tr><th>compte</th><th>debit</th><th>credit</th></tr><% _.each( d, function(l){ %><tr><th><%= l[0] %></th><td><%= l[1] %></td><td><%= l[2] %></td></tr> <% }) %></table>"),render:function(){return $(this.el).html(this.template({d:this.model.toVSON()})),this}}),b.fn.v.Journal=c.View.extend({el:"<dl>",template:_.template('<dt><%=message%><% if(mouvement.length){%><dd><table><tr><th>compte<th>debit<th>crédit</tr><% _.each( mouvement, function(l){ %><tr><th><%= l[0] %></th><td><%= l[1]?l[1].toFixed(window.$fi.fix):"" %></td><td><%= l[2]?l[2].toFixed(window.$fi.fix):"" %></td></tr> <% }) %></table><% } %>'),render:function(){var a=this,b=this.model,c=b.current(),d=$(this.el);return _.each(b.history(),function(){d.append(a.template(c.diff(c.back(1)).toVSON())),c=c.back(1)}),this}})}(window,$fi,Backbone);